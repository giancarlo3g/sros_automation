configure {
    card 1 {
        mda 1 {
            mda-type m5-100g-qsfp28
        }
    }
    log {
        log-events {
            snmp event linkDown {
                specific-throttle true
                specific-throttle-limit 2
                specific-throttle-interval 30
            }
        }
        event-handling {
            handler "ehs_demo" {
                admin-state enable
                entry 10 {
                    script-policy {
                        name "ehs_interface"
                        owner "admin"
                    }
                }
            }
        }
        event-trigger {
            snmp event linkDown {
                admin-state enable
                entry 10 {
                    admin-state enable
                    filter "default"
                    handler "ehs_demo"
                    debounce {
                        value 2
                        time 1
                    }
                }
            }
        }
        filter "1001" {
            named-entry "10" {
                description "Collect only events of major severity or higher"
                action forward
                match {
                    severity {
                        gte major
                    }
                }
            }
        }
        filter "default" {
            default-action forward
        }
        log-id "99" {
            description "Default System Log"
            source {
                main true
            }
            destination {
                memory {
                    max-entries 500
                }
            }
        }
        log-id "100" {
            description "Default Serious Errors Log"
            filter "1001"
            source {
                main true
            }
            destination {
                memory {
                    max-entries 500
                }
            }
        }
    }
    port 1/1/c1 {
        admin-state enable
        connector {
            breakout c1-100g
        }
    }
    port 1/1/c1/1 {
        admin-state enable
        ethernet {
            mode network
            mtu 9212
        }
    }
    port 1/1/c2 {
        admin-state enable
        connector {
            breakout c1-100g
        }
    }
    port 1/1/c2/1 {
        admin-state enable
        ethernet {
            mode network
            mtu 1522
        }
    }
    python {
        python-script "ehs_interface" {
            admin-state enable
            urls ["cf3:/ehs_interface.py"]
            version python3
        }
        python-script "latest-ehs-output" {
            admin-state enable
            urls ["cf3:/latest-ehs-output.py"]
            version python3
        }
    }
    router "Base" {
        interface "toe2c" {
            port 1/1/c1/1
            ipv4 {
                primary {
                    address 10.10.10.1
                    prefix-length 30
                }
            }
        }
        interface "toe2c-2" {
            port 1/1/c2/1
            ipv4 {
                primary {
                    address 10.10.20.1
                    prefix-length 30
                }
            }
        }
    }
    system {
        management-interface {
            cli {
                md-cli {
                    environment {
                        command-alias {
                            alias "latest-ehs-output" {
                                admin-state enable
                                python-script "latest-ehs-output"
                                mount-point "/show" { }
                            }
                            alias "watch" {
                                admin-state enable
                                cli-command "pyexec \"cf3:/watch.py\""
                                mount-point global { }
                            }
                        }
                    }
                }
            }
        }
        script-control {
            script-policy "ehs_interface" owner "admin" {
                admin-state enable
                results "cf3:/results_ehs_python/"
                python-script {
                    name "ehs_interface"
                }
            }
        }
    }
}
